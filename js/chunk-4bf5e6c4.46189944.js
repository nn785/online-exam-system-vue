(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bf5e6c4"],{"39f0":function(e,t,a){"use strict";var r=a("b775");t["a"]={getExamInfo(e){return Object(r["a"])({url:"/public/getExamInfo",method:"post",data:e})},allExamInfo(){return Object(r["a"])({url:"/public/allExamInfo",method:"get"})},operationExam(e,t){return Object(r["a"])({url:"/teacher/operationExam/"+e,method:"get",params:t})},getExamRecord(e){return Object(r["a"])({url:"/teacher/getExamRecord",method:"get",params:e})},getExamInfoById(e){return Object(r["a"])({url:"/public/getExamInfoById",method:"get",params:e})},addExamRecord(e){return Object(r["a"])({url:"/student/addExamRecord",method:"post",data:e})},getExamRecordById(e){return Object(r["a"])({url:"/student/getExamRecordById/"+e,method:"get"})},getExamQuestionByExamId(e){return Object(r["a"])({url:"/student/getExamQuestionByExamId/"+e,method:"get"})},addExamByBank(e){return Object(r["a"])({url:"/teacher/addExamByBank",method:"post",data:e})},addExamByQuestionList(e){return Object(r["a"])({url:"/teacher/addExamByQuestionList",method:"post",data:e})},updateExamInfo(e){return Object(r["a"])({url:"/teacher/updateExamInfo",method:"post",data:e})},getQuestionIdsByExamId(e){return Object(r["a"])({url:"/teacher/getQuestionIdsByExamId",method:"get",params:e})}}},b7ad:function(e,t,a){},c24f:function(e,t,a){"use strict";var r=a("b775");t["a"]={getCurrentUser(){return Object(r["a"])({url:"/public/getCurrentUser",method:"get"})},updateCurrentUser(e){return Object(r["a"])({url:"/public/updateCurrentUser",method:"post",data:e})},getUserByIds(e){return Object(r["a"])({url:"/teacher/getUserByIds",params:e,method:"get"})},getUserInfo(e){return Object(r["a"])({url:"/admin/getUser",method:"get",params:e})},handlerUser(e,t){return Object(r["a"])({url:"/admin/handleUser/"+e,method:"get",params:t})},addUser(e){return Object(r["a"])({url:"/admin/addUser",method:"post",data:e})}}},c9d9:function(e,t,a){"use strict";t["a"]={defaultExamName:"<该考试不存在>"}},e8dc:function(e,t,a){"use strict";a("b7ad")},ffac:function(e,t,a){"use strict";a.r(t);a("14d9");var r=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("el-select",{attrs:{placeholder:"请选择考试"},on:{change:e.getExamRecords},model:{value:e.queryInfo.examId,callback:function(t){e.$set(e.queryInfo,"examId",t)},expression:"queryInfo.examId"}},e._l(e.allExamInfo,(function(a,r){return t("el-option",{key:r,attrs:{label:a.examName,value:parseInt(a.examId)}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.examName))])])})),1),t("el-select",{staticStyle:{"margin-left":"5px"},on:{change:e.getExamRecords},model:{value:e.queryInfo.isMark,callback:function(t){e.$set(e.queryInfo,"isMark",t)},expression:"queryInfo.isMark"}},[t("el-option",{attrs:{label:"待批阅",value:0}}),t("el-option",{attrs:{label:"已批阅",value:1}})],1),t("el-select",{staticStyle:{"margin-left":"5px"},attrs:{clearable:"",placeholder:"请选择分段"},on:{change:e.getExamRecords},model:{value:e.queryInfo.subsection,callback:function(t){e.$set(e.queryInfo,"subsection",t)},expression:"queryInfo.subsection"}},[t("el-option",{attrs:{label:"满分",value:"0"}}),t("el-option",{attrs:{label:"及格",value:"1"}}),t("el-option",{attrs:{label:"未及格",value:"2"}})],1)],1),t("el-main",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"questionTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",border:!0,data:e.examRecords,"tooltip-effect":"dark"}},[t("el-table-column",{attrs:{align:"center",prop:"examName",label:"考试名称"}}),t("el-table-column",{attrs:{align:"center",prop:"examTime",label:"参考时间"}}),t("el-table-column",{attrs:{align:"center",prop:"trueName",label:"参考人"}}),t("el-table-column",{attrs:{align:"center",prop:"logicScore",label:"逻辑题得分"}}),t("el-table-column",{attrs:{align:"center",label:"是否批阅"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(null===a.row.totalScore?"未批阅":"已批阅"))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"总分"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(null===a.row.totalScore?0:a.row.totalScore))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{round:"",size:"small",type:"success",icon:"el-icon-info"},on:{click:function(t){return e.$router.push("/examResult/"+a.row.recordId)}}},[e._v("详情 ")]),t("el-button",{attrs:{type:e.checkMarkButtonNeedShow(a.row)?"primary":"warning",icon:"el-icon-view",size:"small",disabled:!e.checkMarkButtonNeedShow(a.row)},on:{click:function(t){return e.$router.push("/markExam/"+a.row.recordId)}}},[e._v(" "+e._s(e.checkMarkButtonNeedShow(a.row)?"待批阅":"已批阅")+" ")])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"25px"},attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],o=a("39f0"),l=a("c24f"),s=a("c9d9"),u={name:"MarkManage",data(){return{queryInfo:{pageNo:1,pageSize:10,examId:null,isMark:0,subsection:null},examRecords:[],loading:!0,allExamInfo:[],total:0}},created(){this.getAllExamInfo()},methods:{async getExamRecords(){await o["a"].getExamRecord(this.queryInfo).then(async e=>{if(200===e.code){sessionStorage.setItem("queryInfo",JSON.stringify(this.queryInfo));let t=[];e.data.data.forEach(e=>{t.every(t=>t!==e.userId)&&t.push(e.userId)});let a=[];await l["a"].getUserByIds({userIds:t.join(",")}).then(e=>{200===e.code&&(a=e.data)}),e.data.data.forEach(e=>{const t=a.find(t=>t.id===e.userId);e.trueName=null===t||void 0===t?void 0:t.trueName}),this.examRecords=e.data.data,this.setExamName(),this.total=e.data.total,this.loading=!1}})},getAllExamInfo(){o["a"].allExamInfo().then(e=>{if(200===e.code){this.allExamInfo=e.data;let t=JSON.parse(sessionStorage.getItem("queryInfo"));t?this.queryInfo=t:0!==e.data.length&&(this.queryInfo.examId=e.data[0].examId),this.getExamRecords()}})},setExamName(){this.examRecords.forEach(e=>{this.allExamInfo.forEach(t=>{e.examId===t.examId&&this.$set(e,"examName",t.examName)}),e.examName||this.$set(e,"examName",s["a"].defaultExamName)})},handleSizeChange(e){this.queryInfo.pageSize=e,this.getExamRecords()},handleCurrentChange(e){this.queryInfo.pageNo=e,this.getExamRecords()},checkMarkButtonNeedShow(e){return null===e.totalScore&&this.allExamInfo.map(e=>e.examId).includes(e.examId)}}},d=u,c=(a("e8dc"),a("2877")),i=Object(c["a"])(d,r,n,!1,null,"25ee76f6",null);t["default"]=i.exports}}]);
//# sourceMappingURL=chunk-4bf5e6c4.46189944.js.map