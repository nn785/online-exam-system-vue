(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0508b007"],{"2ac8":function(t,e,a){"use strict";var s=a("b775");e["a"]={getQuestionById(t){return Object(s["a"])({url:"/student/getQuestionById/"+t,method:"get"})},getQuestionByIds(t){return Object(s["a"])({url:"/student/getQuestionByIds",params:t,method:"get"})},getQuestion(t){return Object(s["a"])({url:"/teacher/getQuestion",method:"get",params:t})},deleteQuestion(t){return Object(s["a"])({url:"/teacher/deleteQuestion",method:"get",params:t})},addQuestion(t){return Object(s["a"])({url:"/teacher/addQuestion",method:"post",data:t})},importQuestion(t){return Object(s["a"])({url:"/teacher/importQuestion",method:"post",data:t})},updateQuestion(t){return Object(s["a"])({url:"/teacher/updateQuestion",method:"post",data:t})},getQuestionByBankIdAndType(t){return Object(s["a"])({url:"/public/getQuestionByBankIdAndType",method:"get",params:t})}}},"31fc":function(t,e,a){},"39f0":function(t,e,a){"use strict";var s=a("b775");e["a"]={getExamInfo(t){return Object(s["a"])({url:"/public/getExamInfo",method:"post",data:t})},allExamInfo(){return Object(s["a"])({url:"/public/allExamInfo",method:"get"})},operationExam(t,e){return Object(s["a"])({url:"/teacher/operationExam/"+t,method:"get",params:e})},getExamRecord(t){return Object(s["a"])({url:"/teacher/getExamRecord",method:"get",params:t})},getExamInfoById(t){return Object(s["a"])({url:"/public/getExamInfoById",method:"get",params:t})},addExamRecord(t){return Object(s["a"])({url:"/student/addExamRecord",method:"post",data:t})},getExamRecordById(t){return Object(s["a"])({url:"/student/getExamRecordById/"+t,method:"get"})},getExamQuestionByExamId(t){return Object(s["a"])({url:"/student/getExamQuestionByExamId/"+t,method:"get"})},addExamByBank(t){return Object(s["a"])({url:"/teacher/addExamByBank",method:"post",data:t})},addExamByQuestionList(t){return Object(s["a"])({url:"/teacher/addExamByQuestionList",method:"post",data:t})},updateExamInfo(t){return Object(s["a"])({url:"/teacher/updateExamInfo",method:"post",data:t})},getQuestionIdsByExamId(t){return Object(s["a"])({url:"/teacher/getQuestionIdsByExamId",method:"get",params:t})}}},"6f58":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("el-container",[e("el-header",{attrs:{height:"180"}},[e("el-card",{staticStyle:{height:"180px"}},[e("span",{staticClass:"examName"},[t._v(t._s(t.examInfo.examName))]),e("span",{staticClass:"examTime"},[t._v(t._s(t.examRecord.examTime))]),e("el-row",{staticStyle:{"margin-top":"55px"}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"包括(单选,多选,判断题)",placement:"top-start"}},[e("span",{staticStyle:{"font-weight":"800","font-size":"17px"}},[t._v(" 逻辑题得分: "+t._s(t.examRecord.logicScore)+"分")])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"简答题与逻辑题",placement:"top-start"}},[e("span",{staticStyle:{float:"right","font-weight":"800","font-size":"17px"}},[t._v(" 总分: "+t._s(t.examInfo.totalScore)+"分")])])],1)],1)],1),e("el-main",[e("el-card",t._l(t.questionInfo,(function(a,s){return e("div",{key:s,staticStyle:{"margin-top":"15px"}},[e("div",[e("i",{staticClass:"num"},[t._v(t._s(s+1))]),1===a.questionType?e("span",[t._v("【单选题】")]):2===a.questionType?e("span",[t._v("【多选题】")]):3===a.questionType?e("span",[t._v("【判断题】")]):4===a.questionType?e("span",[t._v("【填空题】")]):e("span",[t._v("【简答题】")]),e("span",[t._v(t._s(a.questionContent)+":")]),e("span",{staticStyle:{color:"red","font-style":"italic","font-weight":"400"}},[t._v("  "+t._s(t.questionScore.get(a.questionId))+"分")])]),t._l(a.images,(function(a){return e("img",{staticStyle:{width:"100px",height:"100px",cursor:"pointer"},attrs:{src:t.imgUrl+a,title:"点击查看大图",alt:"题目图片"},on:{click:function(e){return t.showBigImg(a)}}})})),e("div",{directives:[{name:"show",rawName:"v-show",value:1===a.questionType||3===a.questionType,expression:"item.questionType === 1 || item.questionType === 3"}],staticStyle:{"margin-top":"25px"}},[e("div",{staticClass:"el-radio-group"},t._l(a.answer,(function(a,i){return e("label",{class:String(i)===t.userAnswer[s]&&"true"===a.isTrue?"activeAndTrue":String(i)===t.userAnswer[s]?"active":"true"===a.isTrue?"true":""},[e("span",[t._v(t._s(t.optionName[i]+"、"+a.answer))]),t._l(a.images,(function(s){return null!==a.images?e("img",{staticStyle:{position:"absolute",left:"100%",top:"50%",transform:"translateY(-50%)",width:"40px",height:"40px",float:"right",cursor:"pointer"},attrs:{title:"点击查看大图",src:s,alt:""},on:{mouseover:function(e){return t.showBigImg(s)}}}):t._e()}))],2)})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:2===a.questionType,expression:"item.questionType === 2"}],staticStyle:{"margin-top":"25px"}},[e("div",{staticClass:"el-radio-group"},t._l(a.answer,(function(a,i){return e("label",{class:-1!==(t.userAnswer[s]+"").indexOf(i+"")&&"true"===a.isTrue?"activeAndTrue":-1!==(t.userAnswer[s]+"").indexOf(i+"")?"active":"true"===a.isTrue?"true":""},[e("span",[t._v(t._s(t.optionName[i]+"、"+a.answer))]),t._l(a.images,(function(s){return null!==a.images?e("img",{staticStyle:{position:"absolute",left:"100%",top:"50%",transform:"translateY(-50%)",width:"40px",height:"40px",float:"right",cursor:"pointer"},attrs:{title:"点击查看大图",src:s,alt:""},on:{mouseover:function(e){return t.showBigImg(s)}}}):t._e()}))],2)})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:4===a.questionType,expression:"item.questionType === 4"}],staticStyle:{"margin-top":"25px"}},[e("div",{staticClass:"ques-analysis"},[e("div",[t._v(" 正确答案： "),t._l(a.answer,(function(a,s){return e("span",[t._v(" "+t._s(s+1+"、"+a.answer+"    ")+" ")])}))],2),e("br"),e("div",[t._v(" 我的回答： "),t._l(t.userAnswer[s].split(";"),(function(a,s){return e("span",{staticStyle:{color:"orange"}},[t._v(" "+t._s(s+1+"、"+a+"    ")+" ")])}))],2)])]),5===a.questionType?e("div",{staticStyle:{"margin-top":"25px"}},[e("div",{staticClass:"ques-analysis"},[e("h3",{staticStyle:{"font-weight":"400"}},[t._v("我的回答：")]),e("p",{staticStyle:{"font-weight":"400",color:"orange"}},[t._v(" "+t._s(t.userAnswer[s])+" ")])]),e("span",[t._v("评分：")]),e("el-input-number",{attrs:{min:0,max:t.questionScore.get(a.questionId)},model:{value:t.scores[s],callback:function(e){t.$set(t.scores,s,e)},expression:"scores[index]"}})],1):t._e()],2)})),0),e("el-button",{staticStyle:{"margin-top":"25px"},attrs:{size:"small",type:"primary"},on:{click:t.uploadMarkExam}},[t._v("提交阅卷")])],1),e("el-dialog",{attrs:{visible:t.bigImgDialog},on:{"update:visible":function(e){t.bigImgDialog=e},close:function(e){t.bigImgDialog=!1}}},[e("img",{staticStyle:{width:"100%"},attrs:{src:t.imgUrl+t.bigImgUrl}})])],1)},i=[],o=(a("14d9"),a("39f0")),r=a("b775"),n={markExam(t){return Object(r["a"])({url:"/teacher/setObjectQuestionScore",method:"get",params:t})}},u=a("2ac8"),c={name:"MarkExamPage",data(){return{imgUrl:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_IMAGE_URL,examRecord:{},scores:[],examInfo:{},questionInfo:[],loading:{},optionName:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],bigImgUrl:"",bigImgDialog:!1,userAnswer:[],questionScore:new Map}},props:["tagInfo"],created(){this.$emit("giveChildChangeBreakInfo","考试结果","考试结果"),this.createTagsInParent(),this.getExamRecord(),this.loading=this.$Loading.service({body:!0,lock:!0,text:"数据拼命加载中,(*╹▽╹*)",spinner:"el-icon-loading"})},methods:{createTagsInParent(){let t=!1;this.tagInfo.map(e=>{"批阅试卷"===e.name&&e.url===this.$route.path?t=!0:"批阅试卷"===e.name&&e.url!==this.$route.path&&(this.$emit("updateTagInfo","批阅试卷",this.$route.path),t=!0)}),t||this.$emit("giveChildAddTag","批阅试卷",this.$route.path)},async getExamRecord(){await o["a"].getExamRecordById(this.$route.params.recordId).then(t=>{200===t.code&&(this.examRecord=t.data,this.getExamInfoById(t.data.examId),this.userAnswer=t.data.userAnswers.split("-"),this.getQuestionScore(t.data.examId),this.getQuestionInfoByIds(t.data.questionIds),this.loading.close())})},getExamInfoById(t){o["a"].getExamInfoById({examId:t}).then(t=>{200===t.code&&(this.examInfo=t.data)})},async getQuestionInfoByIds(t){await u["a"].getQuestionByIds({ids:t}).then(t=>{var e;200===t.code&&(this.questionInfo=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||[],this.questionInfo.forEach(t=>{4===t.questionType&&(t.score=0)}),this.questionInfo=this.questionInfo.sort((function(t,e){return t.questionType-e.questionType})))})},showBigImg(t){this.bigImgUrl=t,this.bigImgDialog=!0},async getQuestionScore(t){await o["a"].getExamQuestionByExamId(t).then(t=>{if(200===t.code){let e=t.data.scores.split(",");t.data.questionIds.split(",").forEach((t,a)=>{this.questionScore.set(parseInt(t),parseInt(e[a]))})}})},uploadMarkExam(){let t=0,e=!0;if(this.questionInfo.forEach((a,s)=>{5===a.questionType&&(null==this.scores[s]&&(this.$message.error("请先给第"+(s+1)+"题打分"),e=!1),t+=this.scores[s])}),!e)return!1;let a=this.examRecord.logicScore+t;n.markExam({totalScore:a,examRecordId:this.$route.params.recordId}).then(t=>{200===t.code&&(this.$notify({title:"Tips",message:t.message,type:"success",duration:2e3}),this.$router.push("/markManage"))})}}},d=c,l=(a("f17b"),a("2877")),m=Object(l["a"])(d,s,i,!1,null,"66cd92f9",null);e["default"]=m.exports},f17b:function(t,e,a){"use strict";a("31fc")}}]);
//# sourceMappingURL=chunk-0508b007.6c1f30fb.js.map