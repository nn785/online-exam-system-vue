(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8538c498"],{"2ac8":function(e,t,a){"use strict";var o=a("b775");t["a"]={getQuestionById(e){return Object(o["a"])({url:"/student/getQuestionById/"+e,method:"get"})},getQuestionByIds(e){return Object(o["a"])({url:"/student/getQuestionByIds",params:e,method:"get"})},getQuestion(e){return Object(o["a"])({url:"/teacher/getQuestion",method:"get",params:e})},deleteQuestion(e){return Object(o["a"])({url:"/teacher/deleteQuestion",method:"get",params:e})},addQuestion(e){return Object(o["a"])({url:"/teacher/addQuestion",method:"post",data:e})},importQuestion(e){return Object(o["a"])({url:"/teacher/importQuestion",method:"post",data:e})},updateQuestion(e){return Object(o["a"])({url:"/teacher/updateQuestion",method:"post",data:e})},getQuestionByBankIdAndType(e){return Object(o["a"])({url:"/public/getQuestionByBankIdAndType",method:"get",params:e})}}},3786:function(e,t,a){"use strict";var o=a("b775");t["a"]={login(e){return Object(o["a"])({url:"/common/login",method:"post",data:e})},register(e){return Object(o["a"])({url:"/common/register",method:"post",data:e})},checkToken(){return Object(o["a"])({url:"/public/checkToken",method:"get"})},getCode(e){return Object(o["a"])({url:"/util/getCode?id="+e,method:"get"})},checkUsername(e){return Object(o["a"])({url:"/common/check/"+e,method:"get"})}}},"5a7d":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("el-container",[t("el-aside",{attrs:{width:"250px"}},[t("el-input",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-tree",{ref:"tree",staticStyle:{"margin-top":"15px"},attrs:{data:e.professionData,"show-checkbox":"","check-on-click-node":"","expand-on-click-node":!1,"node-key":"id","highlight-current":"","filter-node-method":e.filterNode,props:e.defaultProps},on:{check:e.TreeCurrentChange}})],1),t("el-container",[t("el-header",{attrs:{height:"220"}},[t("el-row",[t("el-select",{attrs:{clearable:"",placeholder:"请选择题目类型"},on:{change:e.typeChange},model:{value:e.queryInfo.questionType,callback:function(t){e.$set(e.queryInfo,"questionType",t)},expression:"queryInfo.questionType"}},e._l(e.questionType,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("el-select",{staticStyle:{"margin-left":"5px"},attrs:{clearable:"",placeholder:"请选择题库"},on:{change:e.bankChange},model:{value:e.queryInfo.questionBank,callback:function(t){e.$set(e.queryInfo,"questionBank",t)},expression:"queryInfo.questionBank"}},e._l(e.allBank,(function(e){return t("el-option",{key:e.id,attrs:{label:e.bankName,value:e.bankName}})})),1),t("el-input",{staticStyle:{"margin-left":"5px",width:"220px"},attrs:{placeholder:"题目内容","prefix-icon":"el-icon-search"},on:{blur:e.contentChange},model:{value:e.queryInfo.questionContent,callback:function(t){e.$set(e.queryInfo,"questionContent",t)},expression:"queryInfo.questionContent"}}),t("el-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){e.addQuTableVisible=!0}}},[e._v("添加 ")])],1)],1),t("el-main",[0!==e.selectionTable.length?t("el-select",{staticStyle:{"margin-bottom":"25px"},attrs:{clearable:"",placeholder:"已选择"+e.selectionTable.length+"项"},on:{change:e.operationChange},model:{value:e.operation,callback:function(t){e.operation=t},expression:"operation"}},e._l(e.optionInfo,(function(a,o){return t("el-option",{key:o,attrs:{value:a.desc}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.label))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a.desc))])])})),1):e._e(),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"questionTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",border:!0,data:e.questionInfo,"tooltip-effect":"dark"},on:{"selection-change":e.handleTableSectionChange}},[t("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"试题内容"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("div",[e._v(" ["),1===a.row.quType?t("span",[e._v("单选题")]):2===a.row.quType?t("span",[e._v("多选题")]):3===a.row.quType?t("span",[e._v("判断题")]):4===a.row.quType?t("span",[e._v("填空题")]):5===a.row.quType?t("span",[e._v("简答题")]):e._e(),e._v("] ["),1===a.row.level?t("span",[e._v("简单")]):e._e(),2===a.row.level?t("span",[e._v("中等")]):e._e(),3===a.row.level?t("span",[e._v("困难")]):e._e(),e._v("] "),t("span",{staticClass:"quContent",on:{click:function(t){return e.updateQu(a.row.id)}}},[e._v(e._s(a.row.quContent))])]),null!=a.row.image&&""!==a.row.image?t("div",{staticStyle:{"margin-top":"5px"}},e._l(a.row.image.split(","),(function(a){return t("img",{staticStyle:{"max-width":"400px","max-height":"120px","margin-right":"20px"},attrs:{src:e.imgUrl+a}})})),0):e._e(),t("div",{staticClass:"qu-knowledgeName"},[t("div",[e._v("所属题库："+e._s(a.row.quBankName))]),t("div",{staticStyle:{"padding-right":"70px"}},[e._v(e._s(new Date(a.row.createTime).toLocaleDateString()))])])])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"25px"},attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-dialog",{attrs:{title:"更新题目",visible:e.updateQuTableVisible,width:"50%",center:""},on:{"update:visible":function(t){e.updateQuTableVisible=t}}},[t("el-card",[t("el-form",{ref:"updateQuForm",attrs:{model:e.updateQuForm,rules:e.updateQuFormRules}},[t("el-form-item",{attrs:{label:"题目类型","label-width":"120px",prop:"questionType"}},[t("el-select",{attrs:{disabled:"",placeholder:"请选择"},on:{change:function(t){e.updateQuForm.answer=[]}},model:{value:e.updateQuForm.questionType,callback:function(t){e.$set(e.updateQuForm,"questionType",t)},expression:"updateQuForm.questionType"}},e._l(e.questionType,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"难度等级","label-width":"120px",prop:"questionLevel"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.updateQuForm.questionLevel,callback:function(t){e.$set(e.updateQuForm,"questionLevel",t)},expression:"updateQuForm.questionLevel"}},[t("el-option",{attrs:{value:parseInt(1),label:"简单"}}),t("el-option",{attrs:{value:parseInt(2),label:"中等"}}),t("el-option",{attrs:{value:parseInt(3),label:"困难"}})],1)],1),t("el-form-item",{attrs:{label:"归属题库","label-width":"120px",prop:"bankId"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.updateQuForm.bankId,callback:function(t){e.$set(e.updateQuForm,"bankId",t)},expression:"updateQuForm.bankId"}},e._l(e.allBank,(function(e){return t("el-option",{key:e.bankId,attrs:{label:e.bankName,value:e.bankId}})})),1)],1),t("el-form-item",{attrs:{label:"归属课程","label-width":"120px",prop:"professionId"}},[t("el-cascader",{staticStyle:{width:"450px"},attrs:{options:e.professionOptions,props:e.professionCascadeProps},model:{value:e.updateQuForm.professionId,callback:function(t){e.$set(e.updateQuForm,"professionId",t)},expression:"updateQuForm.professionId"}})],1),t("el-form-item",{attrs:{label:"题目内容","label-width":"120px",prop:"questionContent"}},[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:e.updateQuForm.questionContent,callback:function(t){e.$set(e.updateQuForm,"questionContent",t)},expression:"updateQuForm.questionContent"}})],1),t("el-form-item",{attrs:{label:"题目图片","label-width":"120px"}},[t("el-upload",{ref:"updateUpload",attrs:{action:e.uploadImageUrl+"/teacher/uploadQuestionImage","on-preview":e.uploadPreview,"on-remove":e.handleUpdateRemove,headers:e.headers,"before-upload":e.beforeAvatarUpload,"list-type":"picture","on-success":e.updateUploadImgSuccess,name:"file"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过10M")])],1)],1),t("el-form-item",{attrs:{label:"整题解析","label-width":"120px",prop:"analysis"}},[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:e.updateQuForm.analysis,callback:function(t){e.$set(e.updateQuForm,"analysis",t)},expression:"updateQuForm.analysis"}})],1),5!==e.updateQuForm.questionType?t("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.addUpdateAnswer(e.updateQuForm.questionType)}}},[e._v(" 添加 ")]):e._e(),5!==e.updateQuForm.questionType?t("el-form-item",{attrs:{prop:"answer"}},[t("el-table",{staticStyle:{width:"96%","margin-left":"40px","margin-top":"10px"},attrs:{data:e.updateQuForm.answer,border:""}},[4!==e.updateQuForm.questionType?t("el-table-column",{attrs:{label:"是否答案",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-checkbox",{on:{change:t=>e.checkUpdateAnswer(t,a.row.id)},model:{value:a.row.isTrue,callback:function(t){e.$set(a.row,"isTrue",t)},expression:"scope.row.isTrue"}},[e._v("答案 ")])]}}],null,!1,3838223355)}):e._e(),t("el-table-column",{attrs:{label:"答案内容"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:a.row.answer,callback:function(t){e.$set(a.row,"answer",t)},expression:"scope.row.answer"}})]}}],null,!1,2873148768)}),t("el-table-column",{attrs:{label:"答案解析"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:a.row.analysis,callback:function(t){e.$set(a.row,"analysis",t)},expression:"scope.row.analysis"}})]}}],null,!1,3618962382)}),t("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.delUpdateAnswer(a.row.id)}}})]}}],null,!1,1195422580)})],1)],1):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.updateQuTableVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateQuestion}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"新增题目",visible:e.addQuTableVisible,width:"50%",center:""},on:{"update:visible":function(t){e.addQuTableVisible=t},close:e.resetAddQuForm}},[t("el-card",[t("el-form",{ref:"addQuForm",attrs:{model:e.addQuForm,rules:e.addQuFormRules}},[t("el-form-item",{attrs:{label:"题目类型","label-width":"120px",prop:"questionType"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.addQuForm.answer=[]}},model:{value:e.addQuForm.questionType,callback:function(t){e.$set(e.addQuForm,"questionType",t)},expression:"addQuForm.questionType"}},e._l(e.questionType,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"难度等级","label-width":"120px",prop:"questionLevel"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addQuForm.questionLevel,callback:function(t){e.$set(e.addQuForm,"questionLevel",t)},expression:"addQuForm.questionLevel"}},[t("el-option",{attrs:{value:parseInt(1),label:"简单"}}),t("el-option",{attrs:{value:parseInt(2),label:"中等"}}),t("el-option",{attrs:{value:parseInt(3),label:"困难"}})],1)],1),t("el-form-item",{attrs:{label:"归属题库","label-width":"120px",prop:"bankId"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addQuForm.bankId,callback:function(t){e.$set(e.addQuForm,"bankId",t)},expression:"addQuForm.bankId"}},e._l(e.allBank,(function(e){return t("el-option",{key:e.bankId,attrs:{label:e.bankName,value:e.bankId}})})),1)],1),t("el-form-item",{attrs:{label:"归属课程","label-width":"120px",prop:"professionId"}},[t("el-cascader",{staticStyle:{width:"450px"},attrs:{options:e.professionOptions,props:e.professionCascadeProps},model:{value:e.addQuForm.professionId,callback:function(t){e.$set(e.addQuForm,"professionId",t)},expression:"addQuForm.professionId"}})],1),t("el-form-item",{attrs:{label:"题目内容","label-width":"120px",prop:"questionContent"}},[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:e.addQuForm.questionContent,callback:function(t){e.$set(e.addQuForm,"questionContent",t)},expression:"addQuForm.questionContent"}})],1),t("el-form-item",{attrs:{label:"题目图片","label-width":"120px",prop:"image"}},[t("el-upload",{ref:"addUpload",attrs:{action:e.uploadImageUrl+"/teacher/uploadQuestionImage","on-preview":e.uploadPreview,"on-remove":e.handleRemove,headers:e.headers,"before-upload":e.beforeAvatarUpload,"list-type":"picture","on-success":e.uploadImgSuccess,name:"file"}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过10M")])],1)],1),t("el-form-item",{attrs:{label:"整题解析","label-width":"120px",prop:"analysis"}},[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:e.addQuForm.analysis,callback:function(t){e.$set(e.addQuForm,"analysis",t)},expression:"addQuForm.analysis"}})],1),5!==e.addQuForm.questionType?t("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.addAnswer(e.addQuForm.questionType)}}},[e._v(" 添加 ")]):e._e(),5!==e.addQuForm.questionType?t("el-form-item",{attrs:{prop:"answer"}},[t("el-table",{staticStyle:{width:"96%","margin-left":"40px","margin-top":"10px"},attrs:{data:e.addQuForm.answer,border:""}},[4!==e.addQuForm.questionType?t("el-table-column",{attrs:{label:"是否答案",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-checkbox",{on:{change:t=>e.checkAnswer(t,a.row.id)},model:{value:a.row.isTrue,callback:function(t){e.$set(a.row,"isTrue",t)},expression:"scope.row.isTrue"}},[e._v("答案 ")])]}}],null,!1,3817251050)}):e._e(),t("el-table-column",{attrs:{label:"答案内容"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:a.row.answer,callback:function(t){e.$set(a.row,"answer",t)},expression:"scope.row.answer"}})]}}],null,!1,2873148768)}),t("el-table-column",{attrs:{label:"答案解析"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{staticStyle:{"margin-left":"5px"},attrs:{type:"textarea",rows:2},model:{value:a.row.analysis,callback:function(t){e.$set(a.row,"analysis",t)},expression:"scope.row.analysis"}})]}}],null,!1,3618962382)}),t("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.delAnswer(a.row.id)}}})]}}],null,!1,2234352101)})],1)],1):e._e()],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addQuTableVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addQuestion}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"加入题库",visible:e.addTableVisible,width:"30%",center:""},on:{"update:visible":function(t){e.addTableVisible=t},close:e.resetAddForm}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[t("el-form-item",{attrs:{label:"题库名称","label-width":"120px",prop:"bankId"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择题库"},model:{value:e.addForm.bankId,callback:function(t){e.$set(e.addForm,"bankId",t)},expression:"addForm.bankId"}},e._l(e.allBank,(function(e){return t("el-option",{key:e.bankId,attrs:{label:e.bankName,value:e.bankId}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addTableVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addBank}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"从题库中移除",visible:e.removeTableVisible,width:"30%",center:""},on:{"update:visible":function(t){e.removeTableVisible=t},close:e.resetRemoveForm}},[t("el-form",{ref:"removeForm",attrs:{model:e.removeForm,rules:e.removeFormRules}},[t("el-form-item",{attrs:{label:"题库名称","label-width":"120px",prop:"bankId"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择题库"},model:{value:e.removeForm.bankId,callback:function(t){e.$set(e.removeForm,"bankId",t)},expression:"removeForm.bankId"}},e._l(e.allBank,(function(e){return t("el-option",{key:e.bankId,attrs:{label:e.bankName,value:e.bankId}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.removeTableVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.removeBank}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{visible:e.backShowImgVisible},on:{"update:visible":function(t){e.backShowImgVisible=t},close:function(t){e.backShowImgVisible=!1}}},[t("img",{staticStyle:{width:"100%"},attrs:{src:e.imgUrl+e.backShowImgUrl,alt:""}})])],1)},s=[],r=(a("14d9"),a("8b81")),n=a("2ac8"),i=a("fa7d"),l=a("7d0a"),u=(a("3786"),a("c24f"),{name:"QuestionManage",data(){return{professionOptions:[],professionCascadeProps:{expandTrigger:"hover",value:"id",label:"name",emitPath:!1},uploadImageUrl:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_UPLOAD_IMAGE_URL,imgUrl:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_IMAGE_URL,filterText:"",professionData:[],defaultProps:{children:"children",label:"name"},chaCascadeProps:{expandTrigger:"hover",checkStrictly:!0,value:"id",label:"name",emitPath:!1},queryInfo:{questionType:"",questionBank:"",professionIds:"",questionContent:"",pageNo:1,pageSize:10},optionName:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],questionType:[{id:1,name:"单选题"},{id:2,name:"多选题"},{id:3,name:"判断题"},{id:4,name:"填空题"},{id:5,name:"简答题"}],allBank:[],questionInfo:[],loading:!0,selectionTable:[],optionInfo:[{label:"删除",desc:"delete"},{label:"加入题库",desc:"add"},{label:"题库中移除",desc:"remove"}],operation:"",total:0,addTableVisible:!1,removeTableVisible:!1,addQuTableVisible:!1,addForm:{bankId:""},removeForm:{bankId:""},addFormRules:{bankId:[{required:!0,message:"请选择需要添加进的题库",trigger:"blur"}]},removeFormRules:{bankId:[{required:!0,message:"请选择需要移除的题库",trigger:"blur"}]},addQuForm:{questionType:1,questionLevel:1,professionId:null,bankId:"",questionContent:"",images:[],analysis:"",createPerson:localStorage.getItem("username"),answer:[]},addQuFormRules:{questionType:[{required:!0,message:"请选择问题类型",trigger:"blur"}],questionLevel:[{required:!0,message:"请选择问题难度",trigger:"blur"}],bankId:[{required:!0,message:"请选择题库",trigger:"blur"}],questionContent:[{required:!0,message:"请输入题库内容",trigger:"blur"}],professionId:[{required:!0,message:"请选择所属课程",trigger:"blur"}]},updateQuFormRules:{questionType:[{required:!0,message:"请选择问题类型",trigger:"blur"}],questionLevel:[{required:!0,message:"请选择问题难度",trigger:"blur"}],bankId:[{required:!0,message:"请选择题库",trigger:"blur"}],questionContent:[{required:!0,message:"请输入题库内容",trigger:"blur"}],professionId:[{required:!0,message:"请选择所属课程",trigger:"blur"}]},backShowImgVisible:!1,backShowImgUrl:"",updateQuForm:{questionId:"",professionId:null,questionType:1,questionLevel:1,bankId:"",questionContent:"",images:[],analysis:"",createPerson:localStorage.getItem("username"),answer:[]},updateQuTableVisible:!1,sendEmBt:!1,showEmailVerify:!1,btnText:"发送验证码",registerInfo:{email:"",code:""},rules:{email:[{required:!0,message:"请输入邮箱号",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},created(){this.professionInfo(),this.getQuestionBankInfo(),this.getQuestionInfo()},methods:{professionInfo(){l["a"].getList().then(e=>{this.professionData=e.data,this.professionOptions=e.data})},getQuestionBankInfo(){r["a"].getQuestionBank().then(e=>{200===e.code&&(this.allBank=e.data)})},typeChange(e){this.queryInfo.questionType=e,this.getQuestionInfo()},bankChange(e){this.queryInfo.questionBank=e,this.getQuestionInfo()},contentChange(){this.getQuestionInfo()},getQuestionInfo(){n["a"].getQuestion(this.queryInfo).then(e=>{200===e.code&&(this.questionInfo=e.data.data,this.total=e.data.total,this.loading=!1)})},handleTableSectionChange(e){this.selectionTable=e},operationChange(e){this.operation="","delete"===e?this.deleteQuestions():"add"===e?this.addTableVisible=!0:"remove"===e&&(this.removeTableVisible=!0)},deleteQuestions(){let e=[];this.selectionTable.map(t=>{e.push(t.id)}),n["a"].deleteQuestion({questionIds:e.join(",")}).then(e=>{200===e.code&&(this.$notify({title:"Tips",message:"删除成功",type:"success",duration:2e3}),this.getQuestionInfo())})},handleSizeChange(e){this.queryInfo.pageSize=e,this.getQuestionInfo()},handleCurrentChange(e){this.queryInfo.pageNo=e,this.getQuestionInfo()},resetAddForm(){this.$refs["addForm"].resetFields()},resetRemoveForm(){this.$refs["removeForm"].resetFields()},resetAddQuForm(){this.$refs["addQuForm"].resetFields()},addBank(){i["a"].validFormAndInvoke(this.$refs["addForm"],()=>{let e=[],t=this.addForm.bankId;this.selectionTable.map(t=>{e.push(t.id)}),r["a"].addBankQuestion({questionIds:e.join(","),banks:t.join(",")}).then(e=>{200===e.code&&(this.getQuestionInfo(),this.$notify({title:"Tips",message:e.message,type:"success",duration:2e3})),this.addTableVisible=!1})},"请选择需要加入进的题库")},removeBank(){i["a"].validFormAndInvoke(this.$refs["removeForm"],()=>{let e=[],t=this.removeForm.bankId;this.selectionTable.map(t=>{e.push(t.id)}),r["a"].removeBankQuestion({questionIds:e.join(","),banks:t.join(",")}).then(e=>{200===e.code&&(this.getQuestionInfo(),this.$notify({title:"Tips",message:e.message,type:"success",duration:2e3})),this.removeTableVisible=!1})},"请选择需要移除的题库")},uploadPreview(e){this.backShowImgUrl=e.response.data,this.backShowImgVisible=!0},handleRemove(e,t){this.addQuForm.images.map((t,a)=>{t===e.response.data&&this.addQuForm.images.splice(a,1)})},handleUpdateRemove(e,t){this.updateQuForm.images.map((t,a)=>{t===e.response.data&&this.updateQuForm.images.splice(a,1)})},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type,a=e.size/1024/1024<10;return t||this.$message.error("上传图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 10MB!"),t&&a},uploadImgSuccess(e,t,a){this.addQuForm.images.push(e.data)},updateUploadImgSuccess(e,t,a){this.updateQuForm.images.push(e.data)},addAnswer(e){this.addQuForm.answer.push({id:this.addQuForm.answer.length,isTrue:4===e,answer:"",analysis:""})},addUpdateAnswer(e){this.updateQuForm.answer.push({id:this.updateQuForm.answer.length,isTrue:4===e,answer:"",analysis:""})},delAnswer(e){this.addQuForm.answer.map((t,a)=>{t.id===e&&this.addQuForm.answer.splice(a,1)})},delUpdateAnswer(e){this.updateQuForm.answer.map((t,a)=>{t.id===e&&this.updateQuForm.answer.splice(a,1)})},checkAnswer(e,t){e?1===this.addQuForm.questionType||3===this.addQuForm.questionType?(this.addQuForm.answer.map(e=>{e.isTrue=!1}),this.addQuForm.answer.map(e=>{e.id===t&&(e.isTrue=!0)})):this.addQuForm.answer.map(e=>{e.id===t&&(e.isTrue=!0)}):this.addQuForm.answer.map(e=>{e.id===t&&(e.isTrue=!1)})},checkUpdateAnswer(e,t){e?1===this.updateQuForm.questionType||3===this.updateQuForm.questionType?(this.updateQuForm.answer.map(e=>{e.isTrue=!1}),this.updateQuForm.answer.map(e=>{e.id===t&&(e.isTrue=!0)})):this.updateQuForm.answer.map(e=>{e.id===t&&(e.isTrue=!0)}):this.updateQuForm.answer.map(e=>{e.id===t&&(e.isTrue=!1)})},addQuestion(){this.$refs["addQuForm"].validate(e=>{if(e&&this.addQuForm.answer.some(e=>e.isTrue)&&5!==this.addQuForm.questionType)n["a"].addQuestion(this.addQuForm).then(e=>{200===e.code&&(this.addQuTableVisible=!1,this.getQuestionInfo(),this.$notify({title:"Tips",message:"新增题目成功",type:"success",duration:2e3}),this.$refs.addUpload.clearFiles())});else{if(e&&!this.addQuForm.answer.some(e=>e.isTrue)&&5!==this.addQuForm.questionType)return this.$message.error("必须有一个答案"),!1;if(e&&5===this.addQuForm.questionType)this.addQuForm.answer=[],n["a"].addQuestion(this.addQuForm).then(e=>{200===e.code&&(this.addQuTableVisible=!1,this.getQuestionInfo(),this.$notify({title:"Tips",message:"新增题目成功",type:"success",duration:2e3}),this.$refs.addUpload.clearFiles())});else if(!e)return this.$message.error("请填写必要信息"),!1}})},updateQu(e){n["a"].getQuestionById(e).then(e=>{200===e.code&&(5!==e.data.questionType&&e.data.answer.map(e=>{e.isTrue="true"===e.isTrue}),this.updateQuForm=e.data,this.updateQuForm.professionId=String(e.data.professionId),console.log(this.updateQuForm),null===this.updateQuForm.images&&(this.updateQuForm.images=[])),this.updateQuTableVisible=!0})},updateQuestion(){this.$refs["updateQuForm"].validate(e=>{if(e&&5!==this.updateQuForm.questionType&&this.updateQuForm.answer.some(e=>e.isTrue))n["a"].updateQuestion(this.updateQuForm).then(e=>{200===e.code&&(this.updateQuTableVisible=!1,this.getQuestionInfo(),this.$notify({title:"Tips",message:"更新题目成功",type:"success",duration:2e3}),this.$refs.updateUpload.clearFiles())});else{if(e&&5!==this.updateQuForm.questionType&&!this.updateQuForm.answer.some(e=>e.isTrue))return this.$message.error("必须有一个答案"),!1;if(e&&5===this.updateQuForm.questionType)this.addQuForm.answer=[],n["a"].updateQuestion(this.updateQuForm).then(e=>{200===e.code&&(this.updateQuTableVisible=!1,this.getQuestionInfo(),this.$notify({title:"Tips",message:"更新题目成功",type:"success",duration:2e3}),this.$refs.updateUpload.clearFiles())});else if(!e)return this.$message.error("请填写必要信息"),!1}})},TreeCurrentChange(){this.queryInfo.professionIds=this.$refs.tree.getCheckedKeys().join(","),this.getQuestionInfo()},filterNode(e,t){return!e||-1!==t.name.indexOf(e)}},computed:{headers(){return{authorization:localStorage.getItem("authorization")||""}}},watch:{filterText(e){this.$refs.tree.filter(e)}}}),d=u,p=(a("7e1e"),a("2877")),c=Object(p["a"])(d,o,s,!1,null,"b9f53dbc",null);t["default"]=c.exports},"758b":function(e,t,a){},"7d0a":function(e,t,a){"use strict";var o=a("b775");t["a"]={getList(e){return Object(o["a"])({url:"/teacher/profession/get",method:"get",params:e})},deleteById(e){return Object(o["a"])({url:"/teacher/profession/delete",method:"get",params:e})},add(e){return Object(o["a"])({url:"/teacher/profession/add",method:"post",data:e})},update(e){return Object(o["a"])({url:"/teacher/profession/update",method:"post",data:e})}}},"7e1e":function(e,t,a){"use strict";a("758b")},"8b81":function(e,t,a){"use strict";var o=a("b775");t["a"]={getBankHaveQuestionSumByType(e){return Object(o["a"])({url:"/public/getBankHaveQuestionSumByType",method:"get",params:e})},deleteQuestionBank(e){return Object(o["a"])({url:"/teacher/deleteQuestionBank",method:"get",params:e})},addQuestionBank(e){return Object(o["a"])({url:"/teacher/addQuestionBank",method:"post",data:e})},getQuestionBank(){return Object(o["a"])({url:"/teacher/getQuestionBank",method:"get"})},addBankQuestion(e){return Object(o["a"])({url:"/teacher/addBankQuestion",method:"get",params:e})},removeBankQuestion(e){return Object(o["a"])({url:"/teacher/removeBankQuestion",method:"get",params:e})},getQuestionByBank(e){return Object(o["a"])({url:"/public/getQuestionByBank",method:"get",params:e})}}},c24f:function(e,t,a){"use strict";var o=a("b775");t["a"]={getCurrentUser(){return Object(o["a"])({url:"/public/getCurrentUser",method:"get"})},updateCurrentUser(e){return Object(o["a"])({url:"/public/updateCurrentUser",method:"post",data:e})},getUserByIds(e){return Object(o["a"])({url:"/teacher/getUserByIds",params:e,method:"get"})},getUserInfo(e){return Object(o["a"])({url:"/admin/getUser",method:"get",params:e})},handlerUser(e,t){return Object(o["a"])({url:"/admin/handleUser/"+e,method:"get",params:t})},addUser(e){return Object(o["a"])({url:"/admin/addUser",method:"post",data:e})}}},fa7d:function(e,t,a){"use strict";var o=a("2b0e");const s=()=>Math.floor(1e7*Math.random()),r=(e,t,a="信息有误",s=function(){})=>{e&&e.validate(r=>{if(!r)return o["default"].prototype.$notify({title:"Tips",message:a,type:"error",duration:2e3}),s(),!1;t(),e.resetFields()})},n=(e,t,a,s=function(){})=>{e&&e.validate(e=>{if(!e)return o["default"].prototype.$notify({title:"Tips",message:a,type:"error",duration:2e3}),s(),!1;t()})};t["a"]={validFormAndInvoke:r,validFormNotEmpty:n,getRandomId:s}}}]);
//# sourceMappingURL=chunk-8538c498.70aac8ff.js.map