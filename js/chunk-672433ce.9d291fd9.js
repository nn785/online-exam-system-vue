(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-672433ce"],{"20b2":function(e,t,a){},"4f3e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"题库名称","prefix-icon":"el-icon-search"},on:{blur:e.contentChange},model:{value:e.queryInfo.bankName,callback:function(t){e.$set(e.queryInfo,"bankName",t)},expression:"queryInfo.bankName"}}),t("br"),t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addTableVisible=!0}}},[e._v("添加 ")])],1),t("el-main",{staticStyle:{"margin-top":"20px"}},[0!==e.selectedTable.length?t("el-select",{staticStyle:{"margin-bottom":"25px"},attrs:{clearable:"",placeholder:"已选择"+e.selectedTable.length+"项"},on:{change:e.operationChange},model:{value:e.operation,callback:function(t){e.operation=t},expression:"operation"}},[t("el-option",{attrs:{value:"delete"}},[t("span",{staticStyle:{float:"left"}},[e._v("删除")]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("delete")])])],1):e._e(),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"questionTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",border:!0,data:e.questionBankInfo,"tooltip-effect":"dark"},on:{"selection-change":e.handleTableSectionChange}},[t("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),t("el-table-column",{attrs:{align:"center",prop:"questionBank.bankName",label:"题库名称"}}),t("el-table-column",{attrs:{align:"center",prop:"singleChoice",label:"单选题数量"}}),t("el-table-column",{attrs:{align:"center",prop:"multipleChoice",label:"多选题数量"}}),t("el-table-column",{attrs:{align:"center",prop:"judge",label:"判断题数量"}}),t("el-table-column",{attrs:{align:"center",prop:"gapFilling",label:"填空题数量"}}),t("el-table-column",{attrs:{align:"center",prop:"shortAnswer",label:"简答题数量"}})],1),t("el-pagination",{staticStyle:{"margin-top":"25px"},attrs:{"current-page":e.queryInfo.pageNo,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"添加题库",visible:e.addTableVisible,width:"30%",center:""},on:{"update:visible":function(t){e.addTableVisible=t},close:function(t){return e.$refs["addForm"].resetFields()}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules}},[t("el-form-item",{attrs:{label:"题库名称","label-width":"120px",prop:"bankName"}},[t("el-input",{model:{value:e.addForm.bankName,callback:function(t){e.$set(e.addForm,"bankName",t)},expression:"addForm.bankName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addTableVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addQuestionBank}},[e._v("确 定")])],1)],1)],1)],1)},o=[],i=(a("14d9"),a("8b81")),l=a("fa7d"),r={name:"QuestionBankManage",data(){return{queryInfo:{bankName:"",pageNo:1,pageSize:10},selectedTable:[],questionBankInfo:[],operation:"",loading:!0,total:0,addTableVisible:!1,addForm:{bankName:""},addFormRules:{bankName:[{required:!0,message:"请输入题库名称",trigger:"blur"}]}}},created(){this.getBankInfo()},methods:{getBankInfo(){i["a"].getBankHaveQuestionSumByType(this.queryInfo).then(e=>{200===e.code?(this.questionBankInfo=e.data.data,this.total=e.data.total,this.loading=!1):this.$notify({title:"Tips",message:e.message,type:"error",duration:2e3})})},contentChange(){this.getBankInfo()},operationChange(e){"delete"===e&&this.$confirm("此操作将永久删除该题库, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let e=[];this.selectedTable.map(t=>{e.push(t.questionBank.bankId)}),i["a"].deleteQuestionBank({ids:e.join(",")}).then(e=>{200===e.code?(this.$notify({title:"Tips",message:e.message,type:"success",duration:2e3}),this.getBankInfo()):this.$notify({title:"Tips",message:e.message,type:"error",duration:2e3})})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleTableSectionChange(e){this.selectedTable=e},handleSizeChange(e){this.queryInfo.pageSize=e,this.getBankInfo()},handleCurrentChange(e){this.queryInfo.pageNo=e,this.getBankInfo()},addQuestionBank(){l["a"].validFormAndInvoke(this.$refs["addForm"],()=>{i["a"].addQuestionBank(this.addForm).then(e=>{200===e.code?(this.getBankInfo(),this.$notify({title:"Tips",message:e.message,type:"success",duration:2e3})):this.$notify({title:"Tips",message:e.message,type:"error",duration:2e3}),this.addTableVisible=!1})},"请检查您所填写的信息是否有误")}}},s=r,d=(a("572e"),a("2877")),u=Object(d["a"])(s,n,o,!1,null,"cc327a1a",null);t["default"]=u.exports},"572e":function(e,t,a){"use strict";a("20b2")},"8b81":function(e,t,a){"use strict";var n=a("b775");t["a"]={getBankHaveQuestionSumByType(e){return Object(n["a"])({url:"/public/getBankHaveQuestionSumByType",method:"get",params:e})},deleteQuestionBank(e){return Object(n["a"])({url:"/teacher/deleteQuestionBank",method:"get",params:e})},addQuestionBank(e){return Object(n["a"])({url:"/teacher/addQuestionBank",method:"post",data:e})},getQuestionBank(){return Object(n["a"])({url:"/teacher/getQuestionBank",method:"get"})},addBankQuestion(e){return Object(n["a"])({url:"/teacher/addBankQuestion",method:"get",params:e})},removeBankQuestion(e){return Object(n["a"])({url:"/teacher/removeBankQuestion",method:"get",params:e})},getQuestionByBank(e){return Object(n["a"])({url:"/public/getQuestionByBank",method:"get",params:e})}}},fa7d:function(e,t,a){"use strict";var n=a("2b0e");const o=()=>Math.floor(1e7*Math.random()),i=(e,t,a="信息有误",o=function(){})=>{e&&e.validate(i=>{if(!i)return n["default"].prototype.$notify({title:"Tips",message:a,type:"error",duration:2e3}),o(),!1;t(),e.resetFields()})},l=(e,t,a,o=function(){})=>{e&&e.validate(e=>{if(!e)return n["default"].prototype.$notify({title:"Tips",message:a,type:"error",duration:2e3}),o(),!1;t()})};t["a"]={validFormAndInvoke:i,validFormNotEmpty:l,getRandomId:o}}}]);
//# sourceMappingURL=chunk-672433ce.9d291fd9.js.map